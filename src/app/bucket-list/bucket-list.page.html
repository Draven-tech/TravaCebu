<ion-header class="bucket-header">
  <div class="bucket-header-content">
    <h2>My Bucket List</h2>
  </div>
</ion-header>

<ion-content fullscreen class="bucket-content ion-padding">
  <span class="clear-text-button" (click)="clear()">CLEAR ALL</span>
  <ion-item-sliding *ngFor="let spot of spots" class="spot-sliding-card">
    <ion-item-options side="end">
      <ion-item-option color="danger" (click)="remove(spot.id)">Remove</ion-item-option>
    </ion-item-options>

    <ion-item lines="none" class="spot-card-horizontal" (click)="openSpotDetail(spot.id)">
      <ion-thumbnail slot="start">
        <img [src]="spot.img" alt="{{ spot.name }}" />
      </ion-thumbnail>
      <ion-label>
        <h3>{{ spot.name }}</h3>
      </ion-label>
    </ion-item>
  </ion-item-sliding>

  <!-- Spacer to prevent last item being covered -->
  <div class="content-spacer"></div>

  <!-- Beautiful Itinerary Setup Modal -->
  <ion-modal [isOpen]="showSetupModal" (didDismiss)="showSetupModal = false" class="setup-modal">
    <ng-template>
      <div class="setup-container">
        <!-- Header -->
        <div class="setup-header">
          <div class="header-content">
            <ion-icon name="calendar-outline" class="header-icon"></ion-icon>
            <h1 class="setup-title">Plan Your Adventure</h1>
            <p class="setup-subtitle">Customize your perfect itinerary</p>
          </div>
        </div>

        <!-- Content -->
        <div class="setup-content">
          <!-- Days Selection -->
          <div class="setup-section">
            <div class="section-header">
              <ion-icon name="calendar" class="section-icon"></ion-icon>
              <h3>How many days?</h3>
            </div>

              <div class="days-slider">
                <ion-item lines="none" class="slider-item">
                  <ion-label position="stacked">Select Duration</ion-label>
                  <ion-range min="1" max="14" step="1" snaps="true" ticks="true" color="warning"
                    [(ngModel)]="setup.days" class="custom-slider">
                    <ion-label slot="start">1</ion-label>
                    <ion-label slot="end">14</ion-label>
                  </ion-range>
                </ion-item>

                <div class="selected-days">
                  {{ setup.days }} {{ setup.days > 1 ? 'Days' : 'Day' }}
                </div>
              </div>
            </div>


          <!-- Date Selection -->
          <div class="setup-section">
            <div class="section-header">
              <ion-icon name="calendar" class="section-icon"></ion-icon>
              <h3>When do you want to start?</h3>
            </div>
            <div class="date-selector">
              <ion-item class="date-input">
                <ion-label position="stacked">Start Date</ion-label>
                <ion-datetime presentation="date" [(ngModel)]="setup.startDate" [min]="getTodayString()"
                  class="custom-datetime">
                </ion-datetime>
              </ion-item>
            </div>
          </div>

          <!-- Time Selection -->
          <div class="setup-section">
            <div class="section-header">
              <ion-icon name="time" class="section-icon"></ion-icon>
              <h3>What time do you want to start?</h3>
            </div>
            <div class="time-selector">
              <ion-item class="time-input">
                <ion-label position="stacked">Start Time</ion-label>
                <ion-datetime presentation="time" [(ngModel)]="setup.startTime" class="custom-datetime">
                </ion-datetime>
              </ion-item>
            </div>
          </div>

          <div class="setup-section">
            <div class="section-header">
              <ion-icon name="moon" class="section-icon"></ion-icon>
              <h3>What time do you want to end?</h3>
            </div>
            <div class="time-selector">
              <ion-item class="time-input">
                <ion-label position="stacked">End Time</ion-label>
                <ion-datetime presentation="time" [(ngModel)]="setup.endTime" class="custom-datetime">
                </ion-datetime>
              </ion-item>
            </div>
          </div>

          <!-- Summary -->
          <div class="setup-summary">
            <div class="summary-card">
              <ion-icon name="information-circle" class="summary-icon"></ion-icon>
              <div class="summary-content">
                <h4>Your Plan</h4>
                <p>{{ getDateDisplay(setup.startDate) }} • {{ setup.days }} day{{ setup.days > 1 ? 's' : '' }} • {{
                  getTimeDisplay(setup.startTime) }} - {{ getTimeDisplay(setup.endTime) }}</p>
                <p class="spots-count">{{ spots.length }} tourist spot{{ spots.length > 1 ? 's' : '' }} to explore</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="setup-actions">
          <ion-button expand="block" color="primary" size="large" (click)="confirmItinerarySetup()"
            class="generate-btn">
            <ion-icon name="rocket" slot="start"></ion-icon>
            Proceed
          </ion-button>
          <ion-button expand="block" fill="clear" color="medium" (click)="showSetupModal = false" class="cancel-btn">
            Cancel
          </ion-button>
        </div>
      </div>
    </ng-template>
  </ion-modal>
</ion-content>

<ion-footer class="footer-fixed">
  <ion-button expand="block" (click)="goToMyItineraries()" class="my-itineraries-btn">
    <ion-icon name="calendar-outline" slot="start"></ion-icon>
    My Itineraries
  </ion-button>
  <ion-button expand="block" (click)="openItinerarySetup()" class="generate-itinerary-btn">
    CONTINUE
  </ion-button>
</ion-footer>

<app-bottom-nav></app-bottom-nav>