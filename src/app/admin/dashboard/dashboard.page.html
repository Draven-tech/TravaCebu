<ion-content class="modern-dashboard-bg ion-padding">
  <div class="admin-topbar">
    <div class="admin-title">TravaCebu Admin Menu</div>
    <div class="admin-actions">
      <ion-avatar class="admin-avatar">
        <img src="assets/img/car.png" alt="Admin Avatar" />
      </ion-avatar>
      <ion-button fill="clear" (click)="logout()">
        <ion-icon name="log-out"></ion-icon>
      </ion-button>
    </div>
  </div>
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <ion-card-header>
          <ion-card-title class="title">Jeepney Routes Management</ion-card-title>
        </ion-card-header>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12" size-md="6">
        <ion-card class="modern-nav-card" (click)="navigateTo('route-editor')" button>
          <ion-card-header>
            <ion-icon name="map" size="large"></ion-icon>
            <ion-card-title>Create Route</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Draw new jeepney routes
          </ion-card-content>
        </ion-card>
      </ion-col>
      <ion-col size="12" size-md="6">
        <ion-card class="modern-nav-card" (click)="navigateTo('route-list')" button>
          <ion-card-header>
            <ion-icon name="list" size="large"></ion-icon>
            <ion-card-title>Manage Routes</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            View and edit existing routes
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-card-header>
          <ion-card-title class="title">Tourist Spots Management</ion-card-title>
        </ion-card-header>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12" size-md="6">
        <ion-card class="modern-nav-card" (click)="navigateTo('tourist-spot-editor')" button>
          <ion-card-header>
            <ion-icon name="location" size="large"></ion-icon>
            <ion-card-title>Add Tourist Spot</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Create new tourist spot locations
          </ion-card-content>
        </ion-card>
      </ion-col>
      <ion-col size="12" size-md="6">
        <ion-card class="modern-nav-card" (click)="navigateTo('tourist-spot-list')" button>
          <ion-card-header>
            <ion-icon name="globe" size="large"></ion-icon>
            <ion-card-title>Manage Spots</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            View and edit tourist spots
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12" size-md="6">
        <ion-card class="modern-nav-card" (click)="navigateTo('pending-spots')" button>
          <ion-card-header>
            <ion-icon name="time" size="large"></ion-icon>
            <ion-card-title>Pending Spots</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Review user-submitted spots
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-row>
    <ion-col size="12">
      <ion-card-header>
        <ion-card-title class="title">Event Management</ion-card-title>
      </ion-card-header>
    </ion-col>
  </ion-row>
  
  <ion-row>
    <ion-col size="12" size-md="6">
      <ion-card class="modern-nav-card" (click)="navigateTo('event-editor')" button>
        <ion-card-header>
          <ion-icon name="calendar" size="large"></ion-icon>
          <ion-card-title>Add Event</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          Create and schedule new events
        </ion-card-content>
      </ion-card>
    </ion-col>
    <ion-col size="12" size-md="6">
      <ion-card class="modern-nav-card" (click)="navigateTo('event-list')" button>
        <ion-card-header>
          <ion-icon name="calendar" size="large"></ion-icon>
          <ion-card-title>Manage Events</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          View and edit scheduled events
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
  

  <ion-card class="api-usage-card">
    <ion-card-header>
      <ion-icon name="refresh" class="refresh-icon"></ion-icon>
      <ion-card-title>API Usage Tracker</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-spinner *ngIf="loadingApiUsage"></ion-spinner>
      
      <div *ngIf="!loadingApiUsage && apiUsageStats">
        <div class="usage-summary">
          <div class="summary-item">
            <ion-icon name="analytics" color="primary"></ion-icon>
            <div>
              <strong>Total Calls:</strong> {{ apiUsageStats.total }} <span class="separator">â€¢</span> <strong>Today:</strong> {{ apiUsageStats.today }}
            </div>
          </div>
        </div>

        <div *ngIf="getApiKeys().length > 0" class="api-breakdown">
          <h4>By API Type:</h4>
          <ion-list>
            <ion-item *ngFor="let api of getApiKeys()">
              <ion-label>
                <h3>{{ api | titlecase }}</h3>
                <p>Total: {{ getApiUsage(api).total }} | Today: {{ getApiUsage(api).today }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
        </div>

        <div *ngIf="getApiKeys().length === 0" class="ion-text-center ion-padding">
          <ion-icon name="information-circle" color="medium" size="large"></ion-icon>
          <p>No API usage data found.</p>
          <p><small>API calls will appear here once you start using the app.</small></p>
        </div>
      </div>

      <div *ngIf="!loadingApiUsage && !apiUsageStats" class="ion-text-center ion-padding">
        <ion-icon name="warning" color="danger" size="large"></ion-icon>
        <p>Failed to load API usage data.</p>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>  